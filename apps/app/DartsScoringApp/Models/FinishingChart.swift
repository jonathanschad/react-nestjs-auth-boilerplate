import Foundation

struct FinishOuts {
    let darts: [String]       // Hauptempfehlung
    
    init(darts: [String]) {
        self.darts = darts
    }
}

struct FinishingChart {
    // PDC-konforme Checkout Chart
    static let finishes: [Int: FinishOuts] = [
    170: FinishOuts(darts: ["T20", "T20", "Bull"]),
    167: FinishOuts(darts: ["T20", "T19", "Bull"]),
    164: FinishOuts(darts: ["T20", "T18", "Bull"]),
    161: FinishOuts(darts: ["T20", "T17", "Bull"]),
    160: FinishOuts(darts: ["T20", "T20", "D20"]),
    158: FinishOuts(darts: ["T20", "T20", "D19"]),
    157: FinishOuts(darts: ["T20", "T19", "D20"]),
    156: FinishOuts(darts: ["T20", "T20", "D18"]),
    155: FinishOuts(darts: ["T20", "T19", "D19"]),
    154: FinishOuts(darts: ["T20", "T18", "D20"]),
    153: FinishOuts(darts: ["T20", "T19", "D18"]),
    152: FinishOuts(darts: ["T20", "T20", "D16"]),
    151: FinishOuts(darts: ["T20", "T17", "D20"]),
    150: FinishOuts(darts: ["T20", "T18", "D18"]),
    149: FinishOuts(darts: ["T20", "T19", "D16"]),
    148: FinishOuts(darts: ["T20", "T16", "D20"]),
    147: FinishOuts(darts: ["T20", "T17", "D18"]),
    146: FinishOuts(darts: ["T20", "T18", "D16"]),
    145: FinishOuts(darts: ["T20", "T15", "D20"]),
    144: FinishOuts(darts: ["T20", "T20", "D12"]),
    143: FinishOuts(darts: ["T20", "T17", "D16"]),
    142: FinishOuts(darts: ["T20", "T14", "D20"]),
    141: FinishOuts(darts: ["T20", "T15", "D18"]),
    140: FinishOuts(darts: ["T20", "T20", "D10"]),
    139: FinishOuts(darts: ["T20", "T19", "D11"]),
    138: FinishOuts(darts: ["T20", "T18", "D12"]),
    137: FinishOuts(darts: ["T20", "T19", "D10"]),
    136: FinishOuts(darts: ["T20", "T20", "D8"]),
    135: FinishOuts(darts: ["Bull", "T15", "D20"]),
    134: FinishOuts(darts: ["T20", "T14", "D16"]),
    133: FinishOuts(darts: ["T20", "T19", "D8"]),
    132: FinishOuts(darts: ["Bull", "T14", "D20"]),
    131: FinishOuts(darts: ["T20", "T13", "D16"]),
    130: FinishOuts(darts: ["T20", "20", "Bull"]),
    129: FinishOuts(darts: ["T19", "T16", "D12"]),
    128: FinishOuts(darts: ["T18", "T14", "D16"]),
    127: FinishOuts(darts: ["T20", "T17", "D8"]),
    126: FinishOuts(darts: ["T19", "T18", "Bull"]),
    125: FinishOuts(darts: ["25", "T20", "D20"]),
    124: FinishOuts(darts: ["T20", "T14", "D11"]),
    123: FinishOuts(darts: ["T19", "T16", "D9"]),
    122: FinishOuts(darts: ["T18", "T20", "D4"]),
    121: FinishOuts(darts: ["T20", "T11", "D14"]),
    120: FinishOuts(darts: ["T20", "20", "D20"]),
    119: FinishOuts(darts: ["T19", "T12", "D13"]),
    118: FinishOuts(darts: ["T20", "18", "D20"]),
    117: FinishOuts(darts: ["T20", "17", "D20"]),
    116: FinishOuts(darts: ["T20", "16", "D20"]),
    115: FinishOuts(darts: ["T20", "15", "D20"]),
    114: FinishOuts(darts: ["T18", "20", "D20"]),
    113: FinishOuts(darts: ["T19", "16", "D20"]),
    112: FinishOuts(darts: ["T20", "12", "D20"]),
    111: FinishOuts(darts: ["T20", "11", "D20"]),
    110: FinishOuts(darts: ["T20", "10", "D20"]),
    109: FinishOuts(darts: ["T20", "9", "D20"]),
    108: FinishOuts(darts: ["T18", "14", "D20"]),
    107: FinishOuts(darts: ["T19", "10", "D20"]),
    106: FinishOuts(darts: ["T20", "14", "D16"]),
    105: FinishOuts(darts: ["T20", "13", "D16"]),
    104: FinishOuts(darts: ["T19", "15", "D16"]),
    103: FinishOuts(darts: ["T19", "10", "D18"]),
    102: FinishOuts(darts: ["T20", "10", "D16"]),
    101: FinishOuts(darts: ["T20", "9", "D16"]),
    99: FinishOuts(darts: ["T19", "10", "D16"]),
    100: FinishOuts(darts: ["T20", "D20"]),
    98: FinishOuts(darts: ["T20", "D19"]),
    97: FinishOuts(darts: ["T19", "D20"]),
    96: FinishOuts(darts: ["T20", "D18"]),
    95: FinishOuts(darts: ["T19", "D19"]),
    94: FinishOuts(darts: ["T18", "D20"]),
    93: FinishOuts(darts: ["T19", "D18"]),
    92: FinishOuts(darts: ["T20", "D16"]),
    91: FinishOuts(darts: ["T17", "D20"]),
    90: FinishOuts(darts: ["T18", "D18"]),
    89: FinishOuts(darts: ["T19", "D16"]),
    88: FinishOuts(darts: ["T16", "D20"]),
    87: FinishOuts(darts: ["T17", "D18"]),
    86: FinishOuts(darts: ["T18", "D16"]),
    84: FinishOuts(darts: ["T20", "D12"]),
    83: FinishOuts(darts: ["T17", "D16"]),
    81: FinishOuts(darts: ["T15", "D18"]),
    80: FinishOuts(darts: ["T20", "D10"]),
    79: FinishOuts(darts: ["T19", "D11"]),
    78: FinishOuts(darts: ["T18", "D12"]),
    77: FinishOuts(darts: ["T19", "D10"]),
    76: FinishOuts(darts: ["T20", "D8"]),
    85: FinishOuts(darts: ["T15", "D20"]),
    73: FinishOuts(darts: ["T19", "D8"]),
    82: FinishOuts(darts: ["T14", "D20"]),
    71: FinishOuts(darts: ["T13", "D16"]),
    70: FinishOuts(darts: ["20", "Bull"]),
    72: FinishOuts(darts: ["T16", "D12"]),
    74: FinishOuts(darts: ["T14", "D16"]),
    67: FinishOuts(darts: ["T17", "D8"]),
    69: FinishOuts(darts: ["T18", "Bull"]),
    64: FinishOuts(darts: ["T14", "D11"]),
    66: FinishOuts(darts: ["T16", "D9"]),
    68: FinishOuts(darts: ["T20", "D4"]),
    61: FinishOuts(darts: ["T11", "D14"]),
    62: FinishOuts(darts: ["T12", "D13"]),
    58: FinishOuts(darts: ["18", "D20"]),
    57: FinishOuts(darts: ["17", "D20"]),
    55: FinishOuts(darts: ["15", "D20"]),
    60: FinishOuts(darts: ["20", "D20"]),
    56: FinishOuts(darts: ["16", "D20"]),
    52: FinishOuts(darts: ["12", "D20"]),
    51: FinishOuts(darts: ["11", "D20"]),
    49: FinishOuts(darts: ["9", "D20"]),
    54: FinishOuts(darts: ["14", "D20"]),
    50: FinishOuts(darts: ["10", "D20"]),
    45: FinishOuts(darts: ["13", "D16"]),
    47: FinishOuts(darts: ["15", "D16"]),
    46: FinishOuts(darts: ["10", "D18"]),
    42: FinishOuts(darts: ["10", "D16"]),
    41: FinishOuts(darts: ["9", "D16"]),
    40: FinishOuts(darts: ["D20"]),
    38: FinishOuts(darts: ["D19"]),
    36: FinishOuts(darts: ["D18"]),
    34: FinishOuts(darts: ["D17"]),
    32: FinishOuts(darts: ["D16"]),
    30: FinishOuts(darts: ["D15"]),
    28: FinishOuts(darts: ["D14"]),
    26: FinishOuts(darts: ["D13"]),
    24: FinishOuts(darts: ["D12"]),
    22: FinishOuts(darts: ["D11"]),
    20: FinishOuts(darts: ["D10"]),
    18: FinishOuts(darts: ["D9"]),
    16: FinishOuts(darts: ["D8"]),
    14: FinishOuts(darts: ["D7"]),
    12: FinishOuts(darts: ["D6"]),
    10: FinishOuts(darts: ["D5"]),
    8: FinishOuts(darts: ["D4"]),
    6: FinishOuts(darts: ["D3"]),
    4: FinishOuts(darts: ["D2"]),
    2: FinishOuts(darts: ["D1"]),
    39: FinishOuts(darts: ["7", "D16"]),
    37: FinishOuts(darts: ["5", "D16"]),
    35: FinishOuts(darts: ["3", "D16"]),
    33: FinishOuts(darts: ["1", "D16"]),
    31: FinishOuts(darts: ["15", "D8"]),
    29: FinishOuts(darts: ["13", "D8"]),
    27: FinishOuts(darts: ["11", "D8"]),
    25: FinishOuts(darts: ["9", "D8"]),
    23: FinishOuts(darts: ["7", "D8"]),
    21: FinishOuts(darts: ["5", "D8"]),
    19: FinishOuts(darts: ["3", "D8"]),
    17: FinishOuts(darts: ["1", "D8"]),
    15: FinishOuts(darts: ["7", "D4"]),
    13: FinishOuts(darts: ["5", "D4"]),
    11: FinishOuts(darts: ["3", "D4"]),
    9: FinishOuts(darts: ["1", "D4"]),
    7: FinishOuts(darts: ["3", "D2"]),
    5: FinishOuts(darts: ["1", "D2"]),
    3: FinishOuts(darts: ["1", "D1"])
    ]

    
    static func getFinish(for score: Int) -> String? {
        guard let finish = finishes[score] else { return nil }

        if finish.darts.isEmpty {
            return nil
        }

        let finishText = finish.darts.joined(separator: " â†’ ")
        return finishText
    }
    
    static func canFinish(_ score: Int) -> Bool {
        guard let finish = finishes[score] else { return false }
        return !finish.darts.isEmpty
    }
} 
